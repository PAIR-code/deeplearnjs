{"dependencies":[{"name":"/usr/local/google/home/nsthorat/deeplearnjs-clients/float16/tfjs-core/tsconfig.json","includedInParent":true,"mtime":1529003832385},{"name":"/usr/local/google/home/nsthorat/deeplearnjs-clients/float16/tfjs-core/test/package.json","includedInParent":true,"mtime":1530637734514}],"generated":{"js":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar ReduceProgram = function () {\n    function ReduceProgram(reduceInfo, reduceType) {\n        this.variableNames = ['x'];\n        var windowSize = reduceInfo.windowSize;\n        var batchSize = reduceInfo.batchSize;\n        var inSize = reduceInfo.inSize;\n        var outSize = Math.ceil(inSize / windowSize);\n        this.outputShape = [batchSize, outSize];\n        var initializationValue = '0.0';\n        var compareOp = \"\";\n        if (reduceType === 'min') {\n            initializationValue = '1.0 / 0.0';\n            compareOp = \"min\";\n        } else if (reduceType === 'max') {\n            initializationValue = '-1.0 / 0.0';\n            compareOp = \"max\";\n        }\n        var returnValue = reduceType + \"(\" + reduceType + \"(\" + reduceType + \"(\" + 'minMaxValue[0], minMaxValue[1]), minMaxValue[2]), minMaxValue[3])';\n        if (reduceType === 'sum') {\n            returnValue = \"sumValue\";\n        } else if (reduceType === 'all') {\n            returnValue = \"allValue\";\n        } else if (reduceType === 'any') {\n            returnValue = \"anyValue\";\n        }\n        var windowSizeNearestVec4 = Math.floor(windowSize / 4) * 4;\n        var windowSizeVec4Remainder = windowSize % 4;\n        var updateSnippet = \"\\n      if (\" + (reduceType === 'sum') + \") {\\n        sumValue += dot(values, ones);\\n      } else {\\n        minMaxValue = \" + compareOp + \"(values, minMaxValue);\\n      }\\n    \";\n        var vecType = \"vec4\";\n        if (reduceType === 'all') {\n            initializationValue = '1.0';\n            updateSnippet = \"\\n        bool reducedAllValue = all(values);\\n        float floatedReducedAllValue = float(reducedAllValue);\\n        allValue = float(allValue >= 1.0 && floatedReducedAllValue >= 1.0);\\n      \";\n            vecType = \"bvec4\";\n        } else if (reduceType === 'any') {\n            initializationValue = '0.0';\n            updateSnippet = \"\\n        bool reducedAnyValue = any(values);\\n        float floatedReducedAnyValue = float(reducedAnyValue);\\n        anyValue = float(anyValue >= 1.0 || floatedReducedAnyValue >= 1.0);\\n      \";\n            vecType = \"bvec4\";\n        }\n        var checkOutOfBounds = '';\n        if (inSize % windowSize > 0) {\n            checkOutOfBounds = \"\\n        if (inIdx < 0 || inIdx >= \" + inSize + \") {\\n          return initializationValue;\\n        }\\n      \";\n        }\n        this.userCode = \"\\n      const float initializationValue = \" + initializationValue + \";\\n      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);\\n\\n      float getValue(int batch, int inIdx) {\\n        \" + checkOutOfBounds + \"\\n        return getX(batch, inIdx);\\n      }\\n\\n      void main() {\\n        ivec2 coords = getOutputCoords();\\n        int batch = coords[0];\\n        int outIdx = coords[1];\\n        int inOffset = outIdx * \" + windowSize + \";\\n\\n        vec4 minMaxValue = vec4(\" + initializationValue + \");\\n        float sumValue = 0.0;\\n        float allValue = 1.0;\\n        float anyValue = 0.0;\\n\\n        for (int i = 0; i < \" + windowSizeNearestVec4 + \"; i += 4) {\\n          int inIdx = inOffset + i;\\n          \" + vecType + \" values = \" + vecType + \"(\\n            getValue(batch, inIdx),\\n            getValue(batch, inIdx + 1),\\n            getValue(batch, inIdx + 2),\\n            getValue(batch, inIdx + 3)\\n          );\\n\\n          \" + updateSnippet + \"\\n        }\\n\\n        int inIdx = inOffset + \" + windowSizeNearestVec4 + \";\\n        if (\" + (windowSizeVec4Remainder === 1) + \") {\\n          \" + vecType + \" values = \" + vecType + \"(\\n            getValue(batch, inIdx),\\n            initializationValue,\\n            initializationValue,\\n            initializationValue\\n          );\\n\\n          \" + updateSnippet + \"\\n        } else if (\" + (windowSizeVec4Remainder === 2) + \") {\\n          \" + vecType + \" values = \" + vecType + \"(\\n            getValue(batch, inIdx),\\n            getValue(batch, inIdx + 1),\\n            initializationValue,\\n            initializationValue\\n          );\\n\\n          \" + updateSnippet + \"\\n        } else if (\" + (windowSizeVec4Remainder === 3) + \") {\\n          \" + vecType + \" values = \" + vecType + \"(\\n            getValue(batch, inIdx),\\n            getValue(batch, inIdx + 1),\\n            getValue(batch, inIdx + 2),\\n            initializationValue\\n          );\\n\\n          \" + updateSnippet + \"\\n        }\\n        setOutput(\" + returnValue + \");\\n      }\\n    \";\n    }\n    return ReduceProgram;\n}();\nexports.ReduceProgram = ReduceProgram;","map":{"mappings":[{"source":"../src/kernels/webgl/reduce_gpu.ts","name":null,"original":{"line":21,"column":0},"generated":{"line":4,"column":0}},{"source":"../src/kernels/webgl/reduce_gpu.ts","name":null,"original":{"line":21,"column":0},"generated":{"line":4,"column":4}},{"source":"../src/kernels/webgl/reduce_gpu.ts","name":null,"original":{"line":21,"column":0},"generated":{"line":4,"column":20}},{"source":"../src/kernels/webgl/reduce_gpu.ts","name":null,"original":{"line":21,"column":0},"generated":{"line":4,"column":32}},{"source":"../src/kernels/webgl/reduce_gpu.ts","name":null,"original":{"line":26,"column":2},"generated":{"line":5,"column":0}},{"source":"../src/kernels/webgl/reduce_gpu.ts","name":null,"original":{"line":26,"column":2},"generated":{"line":5,"column":13}},{"source":"../src/kernels/webgl/reduce_gpu.ts","name":null,"original":{"line":26,"column":2},"generated":{"line":5,"column":26}},{"source":"../src/kernels/webgl/reduce_gpu.ts","name":null,"original":{"line":27,"column":6},"generated":{"line":5,"column":27}},{"source":"../src/kernels/webgl/reduce_gpu.ts","name":null,"original":{"line":26,"column":2},"generated":{"line":5,"column":37}},{"source":"../src/kernels/webgl/reduce_gpu.ts","name":null,"original":{"line":27,"column":30},"generated":{"line":5,"column":39}},{"source":"../src/kernels/webgl/reduce_gpu.ts","name":null,"original":{"line":26,"column":2},"generated":{"line":5,"column":49}},{"source":"../src/kernels/webgl/reduce_gpu.ts","name":null,"original":{"line":27,"column":71},"generated":{"line":5,"column":51}},{"source":"../src/kernels/webgl/reduce_gpu.ts","name":null,"original":{"line":22,"column":2},"generated":{"line":6,"column":0}},{"source":"../src/kernels/webgl/reduce_gpu.ts","name":null,"original":{"line":22,"column":2},"generated":{"line":6,"column":13}},{"source":"../src/kernels/webgl/reduce_gpu.ts","name":null,"original":{"line":22,"column":2},"generated":{"line":6,"column":26}},{"source":"../src/kernels/webgl/reduce_gpu.ts","name":null,"original":{"line":22,"column":18},"generated":{"line":6,"column":29}},{"source":"../src/kernels/webgl/reduce_gpu.ts","name":null,"original":{"line":22,"column":19},"generated":{"line":6,"column":30}},{"source":"../src/kernels/webgl/reduce_gpu.ts","name":null,"original":{"line":22,"column":18},"generated":{"line":6,"column":33}},{"source":"../src/kernels/webgl/reduce_gpu.ts","name":null,"original":{"line":22,"column":2},"generated":{"line":6,"column":34}},{"source":"../src/kernels/webgl/reduce_gpu.ts","name":null,"original":{"line":28,"column":4},"generated":{"line":7,"column":0}},{"source":"../src/kernels/webgl/reduce_gpu.ts","name":null,"original":{"line":28,"column":10},"generated":{"line":7,"column":12}},{"source":"../src/kernels/webgl/reduce_gpu.ts","name":null,"original":{"line":28,"column":23},"generated":{"line":7,"column":25}},{"source":"../src/kernels/webgl/reduce_gpu.ts","name":null,"original":{"line":28,"column":34},"generated":{"line":7,"column":36}},{"source":"../src/kernels/webgl/reduce_gpu.ts","name":null,"original":{"line":28,"column":4},"generated":{"line":7,"column":46}},{"source":"../src/kernels/webgl/reduce_gpu.ts","name":null,"original":{"line":29,"column":4},"generated":{"line":8,"column":0}},{"source":"../src/kernels/webgl/reduce_gpu.ts","name":null,"original":{"line":29,"column":10},"generated":{"line":8,"column":12}},{"source":"../src/kernels/webgl/reduce_gpu.ts","name":null,"original":{"line":29,"column":22},"generated":{"line":8,"column":24}},{"source":"../src/kernels/webgl/reduce_gpu.ts","name":null,"original":{"line":29,"column":33},"generated":{"line":8,"column":35}},{"source":"../src/kernels/webgl/reduce_gpu.ts","name":null,"original":{"line":29,"column":4},"generated":{"line":8,"column":44}},{"source":"../src/kernels/webgl/reduce_gpu.ts","name":null,"original":{"line":30,"column":4},"generated":{"line":9,"column":0}},{"source":"../src/kernels/webgl/reduce_gpu.ts","name":null,"original":{"line":30,"column":10},"generated":{"line":9,"column":12}},{"source":"../src/kernels/webgl/reduce_gpu.ts","name":null,"original":{"line":30,"column":19},"generated":{"line":9,"column":21}},{"source":"../src/kernels/webgl/reduce_gpu.ts","name":null,"original":{"line":30,"column":30},"generated":{"line":9,"column":32}},{"source":"../src/kernels/webgl/reduce_gpu.ts","name":null,"original":{"line":30,"column":4},"generated":{"line":9,"column":38}},{"source":"../src/kernels/webgl/reduce_gpu.ts","name":null,"original":{"line":31,"column":4},"generated":{"line":10,"column":0}},{"source":"../src/kernels/webgl/reduce_gpu.ts","name":null,"original":{"line":31,"column":10},"generated":{"line":10,"column":12}},{"source":"../src/kernels/webgl/reduce_gpu.ts","name":null,"original":{"line":31,"column":20},"generated":{"line":10,"column":22}},{"source":"../src/kernels/webgl/reduce_gpu.ts","name":null,"original":{"line":31,"column":25},"generated":{"line":10,"column":27}},{"source":"../src/kernels/webgl/reduce_gpu.ts","name":null,"original":{"line":31,"column":20},"generated":{"line":10,"column":31}},{"source":"../src/kernels/webgl/reduce_gpu.ts","name":null,"original":{"line":31,"column":30},"generated":{"line":10,"column":32}},{"source":"../src/kernels/webgl/reduce_gpu.ts","name":null,"original":{"line":31,"column":39},"generated":{"line":10,"column":41}},{"source":"../src/kernels/webgl/reduce_gpu.ts","name":null,"original":{"line":31,"column":20},"generated":{"line":10,"column":51}},{"source":"../src/kernels/webgl/reduce_gpu.ts","name":null,"original":{"line":31,"column":4},"generated":{"line":10,"column":52}},{"source":"../src/kernels/webgl/reduce_gpu.ts","name":null,"original":{"line":32,"column":4},"generated":{"line":11,"column":0}},{"source":"../src/kernels/webgl/reduce_gpu.ts","name":null,"original":{"line":32,"column":9},"generated":{"line":11,"column":13}},{"source":"../src/kernels/webgl/reduce_gpu.ts","name":null,"original":{"line":32,"column":4},"generated":{"line":11,"column":24}},{"source":"../src/kernels/webgl/reduce_gpu.ts","name":null,"original":{"line":32,"column":23},"generated":{"line":11,"column":27}},{"source":"../src/kernels/webgl/reduce_gpu.ts","name":null,"original":{"line":32,"column":24},"generated":{"line":11,"column":28}},{"source":"../src/kernels/webgl/reduce_gpu.ts","name":null,"original":{"line":32,"column":23},"generated":{"line":11,"column":37}},{"source":"../src/kernels/webgl/reduce_gpu.ts","name":null,"original":{"line":32,"column":35},"generated":{"line":11,"column":39}},{"source":"../src/kernels/webgl/reduce_gpu.ts","name":null,"original":{"line":32,"column":23},"generated":{"line":11,"column":46}},{"source":"../src/kernels/webgl/reduce_gpu.ts","name":null,"original":{"line":32,"column":4},"generated":{"line":11,"column":47}},{"source":"../src/kernels/webgl/reduce_gpu.ts","name":null,"original":{"line":34,"column":4},"generated":{"line":12,"column":0}},{"source":"../src/kernels/webgl/reduce_gpu.ts","name":null,"original":{"line":34,"column":8},"generated":{"line":12,"column":12}},{"source":"../src/kernels/webgl/reduce_gpu.ts","name":null,"original":{"line":34,"column":30},"generated":{"line":12,"column":34}},{"source":"../src/kernels/webgl/reduce_gpu.ts","name":null,"original":{"line":34,"column":4},"generated":{"line":12,"column":39}},{"source":"../src/kernels/webgl/reduce_gpu.ts","name":null,"original":{"line":35,"column":4},"generated":{"line":13,"column":0}},{"source":"../src/kernels/webgl/reduce_gpu.ts","name":null,"original":{"line":35,"column":8},"generated":{"line":13,"column":12}},{"source":"../src/kernels/webgl/reduce_gpu.ts","name":null,"original":{"line":35,"column":20},"generated":{"line":13,"column":24}},{"source":"../src/kernels/webgl/reduce_gpu.ts","name":null,"original":{"line":35,"column":4},"generated":{"line":13,"column":26}},{"source":"../src/kernels/webgl/reduce_gpu.ts","name":null,"original":{"line":37,"column":4},"generated":{"line":14,"column":0}},{"source":"../src/kernels/webgl/reduce_gpu.ts","name":null,"original":{"line":37,"column":8},"generated":{"line":14,"column":12}},{"source":"../src/kernels/webgl/reduce_gpu.ts","name":null,"original":{"line":37,"column":23},"generated":{"line":14,"column":27}},{"source":"../src/kernels/webgl/reduce_gpu.ts","name":null,"original":{"line":37,"column":4},"generated":{"line":14,"column":32}},{"source":"../src/kernels/webgl/reduce_gpu.ts","name":null,"original":{"line":37,"column":30},"generated":{"line":14,"column":34}},{"source":"../src/kernels/webgl/reduce_gpu.ts","name":null,"original":{"line":38,"column":6},"generated":{"line":15,"column":0}},{"source":"../src/kernels/webgl/reduce_gpu.ts","name":null,"original":{"line":38,"column":28},"generated":{"line":15,"column":34}},{"source":"../src/kernels/webgl/reduce_gpu.ts","name":null,"original":{"line":38,"column":6},"generated":{"line":15,"column":45}},{"source":"../src/kernels/webgl/reduce_gpu.ts","name":null,"original":{"line":39,"column":6},"generated":{"line":16,"column":0}},{"source":"../src/kernels/webgl/reduce_gpu.ts","name":null,"original":{"line":39,"column":18},"generated":{"line":16,"column":24}},{"source":"../src/kernels/webgl/reduce_gpu.ts","name":null,"original":{"line":39,"column":6},"generated":{"line":16,"column":29}},{"source":"../src/kernels/webgl/reduce_gpu.ts","name":null,"original":{"line":40,"column":5},"generated":{"line":17,"column":0}},{"source":"../src/kernels/webgl/reduce_gpu.ts","name":null,"original":{"line":37,"column":4},"generated":{"line":17,"column":9}},{"source":"../src/kernels/webgl/reduce_gpu.ts","name":null,"original":{"line":40,"column":11},"generated":{"line":17,"column":15}},{"source":"../src/kernels/webgl/reduce_gpu.ts","name":null,"original":{"line":40,"column":15},"generated":{"line":17,"column":19}},{"source":"../src/kernels/webgl/reduce_gpu.ts","name":null,"original":{"line":40,"column":30},"generated":{"line":17,"column":34}},{"source":"../src/kernels/webgl/reduce_gpu.ts","name":null,"original":{"line":40,"column":11},"generated":{"line":17,"column":39}},{"source":"../src/kernels/webgl/reduce_gpu.ts","name":null,"original":{"line":40,"column":37},"generated":{"line":17,"column":41}},{"source":"../src/kernels/webgl/reduce_gpu.ts","name":null,"original":{"line":41,"column":6},"generated":{"line":18,"column":0}},{"source":"../src/kernels/webgl/reduce_gpu.ts","name":null,"original":{"line":41,"column":28},"generated":{"line":18,"column":34}},{"source":"../src/kernels/webgl/reduce_gpu.ts","name":null,"original":{"line":41,"column":6},"generated":{"line":18,"column":46}},{"source":"../src/kernels/webgl/reduce_gpu.ts","name":null,"original":{"line":42,"column":6},"generated":{"line":19,"column":0}},{"source":"../src/kernels/webgl/reduce_gpu.ts","name":null,"original":{"line":42,"column":18},"generated":{"line":19,"column":24}},{"source":"../src/kernels/webgl/reduce_gpu.ts","name":null,"original":{"line":42,"column":6},"generated":{"line":19,"column":29}},{"source":"../src/kernels/webgl/reduce_gpu.ts","name":null,"original":{"line":43,"column":5},"generated":{"line":20,"column":0}},{"source":"../src/kernels/webgl/reduce_gpu.ts","name":null,"original":{"line":45,"column":4},"generated":{"line":21,"column":0}},{"source":"../src/kernels/webgl/reduce_gpu.ts","name":null,"original":{"line":45,"column":8},"generated":{"line":21,"column":12}},{"source":"../src/kernels/webgl/reduce_gpu.ts","name":null,"original":{"line":45,"column":25},"generated":{"line":21,"column":26}},{"source":"../src/kernels/webgl/reduce_gpu.ts","name":null,"original":{"line":45,"column":35},"generated":{"line":21,"column":39}},{"source":"../src/kernels/webgl/reduce_gpu.ts","name":null,"original":{"line":45,"column":25},"generated":{"line":21,"column":42}},{"source":"../src/kernels/webgl/reduce_gpu.ts","name":null,"original":{"line":45,"column":39},"generated":{"line":21,"column":45}},{"source":"../src/kernels/webgl/reduce_gpu.ts","name":null,"original":{"line":45,"column":25},"generated":{"line":21,"column":55}},{"source":"../src/kernels/webgl/reduce_gpu.ts","name":null,"original":{"line":45,"column":49},"generated":{"line":21,"column":58}},{"source":"../src/kernels/webgl/reduce_gpu.ts","name":null,"original":{"line":45,"column":25},"generated":{"line":21,"column":61}},{"source":"../src/kernels/webgl/reduce_gpu.ts","name":null,"original":{"line":45,"column":53},"generated":{"line":21,"column":64}},{"source":"../src/kernels/webgl/reduce_gpu.ts","name":null,"original":{"line":45,"column":25},"generated":{"line":21,"column":74}},{"source":"../src/kernels/webgl/reduce_gpu.ts","name":null,"original":{"line":45,"column":63},"generated":{"line":21,"column":77}},{"source":"../src/kernels/webgl/reduce_gpu.ts","name":null,"original":{"line":45,"column":25},"generated":{"line":21,"column":80}},{"source":"../src/kernels/webgl/reduce_gpu.ts","name":null,"original":{"line":46,"column":8},"generated":{"line":21,"column":83}},{"source":"../src/kernels/webgl/reduce_gpu.ts","name":null,"original":{"line":45,"column":4},"generated":{"line":21,"column":150}},{"source":"../src/kernels/webgl/reduce_gpu.ts","name":null,"original":{"line":48,"column":4},"generated":{"line":22,"column":0}},{"source":"../src/kernels/webgl/reduce_gpu.ts","name":null,"original":{"line":48,"column":8},"generated":{"line":22,"column":12}},{"source":"../src/kernels/webgl/reduce_gpu.ts","name":null,"original":{"line":48,"column":23},"generated":{"line":22,"column":27}},{"source":"../src/kernels/webgl/reduce_gpu.ts","name":null,"original":{"line":48,"column":4},"generated":{"line":22,"column":32}},{"source":"../src/kernels/webgl/reduce_gpu.ts","name":null,"original":{"line":48,"column":30},"generated":{"line":22,"column":34}},{"source":"../src/kernels/webgl/reduce_gpu.ts","name":null,"original":{"line":49,"column":6},"generated":{"line":23,"column":0}},{"source":"../src/kernels/webgl/reduce_gpu.ts","name":null,"original":{"line":49,"column":20},"generated":{"line":23,"column":26}},{"source":"../src/kernels/webgl/reduce_gpu.ts","name":null,"original":{"line":49,"column":6},"generated":{"line":23,"column":36}},{"source":"../src/kernels/webgl/reduce_gpu.ts","name":null,"original":{"line":50,"column":5},"generated":{"line":24,"column":0}},{"source":"../src/kernels/webgl/reduce_gpu.ts","name":null,"original":{"line":48,"column":4},"generated":{"line":24,"column":9}},{"source":"../src/kernels/webgl/reduce_gpu.ts","name":null,"original":{"line":50,"column":11},"generated":{"line":24,"column":15}},{"source":"../src/kernels/webgl/reduce_gpu.ts","name":null,"original":{"line":50,"column":15},"generated":{"line":24,"column":19}},{"source":"../src/kernels/webgl/reduce_gpu.ts","name":null,"original":{"line":50,"column":30},"generated":{"line":24,"column":34}},{"source":"../src/kernels/webgl/reduce_gpu.ts","name":null,"original":{"line":50,"column":11},"generated":{"line":24,"column":39}},{"source":"../src/kernels/webgl/reduce_gpu.ts","name":null,"original":{"line":50,"column":37},"generated":{"line":24,"column":41}},{"source":"../src/kernels/webgl/reduce_gpu.ts","name":null,"original":{"line":51,"column":6},"generated":{"line":25,"column":0}},{"source":"../src/kernels/webgl/reduce_gpu.ts","name":null,"original":{"line":51,"column":20},"generated":{"line":25,"column":26}},{"source":"../src/kernels/webgl/reduce_gpu.ts","name":null,"original":{"line":51,"column":6},"generated":{"line":25,"column":36}},{"source":"../src/kernels/webgl/reduce_gpu.ts","name":null,"original":{"line":52,"column":5},"generated":{"line":26,"column":0}},{"source":"../src/kernels/webgl/reduce_gpu.ts","name":null,"original":{"line":50,"column":11},"generated":{"line":26,"column":9}},{"source":"../src/kernels/webgl/reduce_gpu.ts","name":null,"original":{"line":52,"column":11},"generated":{"line":26,"column":15}},{"source":"../src/kernels/webgl/reduce_gpu.ts","name":null,"original":{"line":52,"column":15},"generated":{"line":26,"column":19}},{"source":"../src/kernels/webgl/reduce_gpu.ts","name":null,"original":{"line":52,"column":30},"generated":{"line":26,"column":34}},{"source":"../src/kernels/webgl/reduce_gpu.ts","name":null,"original":{"line":52,"column":11},"generated":{"line":26,"column":39}},{"source":"../src/kernels/webgl/reduce_gpu.ts","name":null,"original":{"line":52,"column":37},"generated":{"line":26,"column":41}},{"source":"../src/kernels/webgl/reduce_gpu.ts","name":null,"original":{"line":53,"column":6},"generated":{"line":27,"column":0}},{"source":"../src/kernels/webgl/reduce_gpu.ts","name":null,"original":{"line":53,"column":20},"generated":{"line":27,"column":26}},{"source":"../src/kernels/webgl/reduce_gpu.ts","name":null,"original":{"line":53,"column":6},"generated":{"line":27,"column":36}},{"source":"../src/kernels/webgl/reduce_gpu.ts","name":null,"original":{"line":54,"column":5},"generated":{"line":28,"column":0}},{"source":"../src/kernels/webgl/reduce_gpu.ts","name":null,"original":{"line":56,"column":4},"generated":{"line":29,"column":0}},{"source":"../src/kernels/webgl/reduce_gpu.ts","name":null,"original":{"line":56,"column":10},"generated":{"line":29,"column":12}},{"source":"../src/kernels/webgl/reduce_gpu.ts","name":null,"original":{"line":56,"column":34},"generated":{"line":29,"column":36}},{"source":"../src/kernels/webgl/reduce_gpu.ts","name":null,"original":{"line":56,"column":39},"generated":{"line":29,"column":41}},{"source":"../src/kernels/webgl/reduce_gpu.ts","name":null,"original":{"line":56,"column":34},"generated":{"line":29,"column":46}},{"source":"../src/kernels/webgl/reduce_gpu.ts","name":null,"original":{"line":56,"column":45},"generated":{"line":29,"column":47}},{"source":"../src/kernels/webgl/reduce_gpu.ts","name":null,"original":{"line":56,"column":58},"generated":{"line":29,"column":60}},{"source":"../src/kernels/webgl/reduce_gpu.ts","name":null,"original":{"line":56,"column":34},"generated":{"line":29,"column":61}},{"source":"../src/kernels/webgl/reduce_gpu.ts","name":null,"original":{"line":56,"column":63},"generated":{"line":29,"column":65}},{"source":"../src/kernels/webgl/reduce_gpu.ts","name":null,"original":{"line":56,"column":4},"generated":{"line":29,"column":66}},{"source":"../src/kernels/webgl/reduce_gpu.ts","name":null,"original":{"line":57,"column":4},"generated":{"line":30,"column":0}},{"source":"../src/kernels/webgl/reduce_gpu.ts","name":null,"original":{"line":57,"column":10},"generated":{"line":30,"column":12}},{"source":"../src/kernels/webgl/reduce_gpu.ts","name":null,"original":{"line":57,"column":36},"generated":{"line":30,"column":38}},{"source":"../src/kernels/webgl/reduce_gpu.ts","name":null,"original":{"line":57,"column":49},"generated":{"line":30,"column":51}},{"source":"../src/kernels/webgl/reduce_gpu.ts","name":null,"original":{"line":57,"column":4},"generated":{"line":30,"column":52}},{"source":"../src/kernels/webgl/reduce_gpu.ts","name":null,"original":{"line":59,"column":4},"generated":{"line":31,"column":0}},{"source":"../src/kernels/webgl/reduce_gpu.ts","name":null,"original":{"line":59,"column":8},"generated":{"line":31,"column":12}},{"source":"../src/kernels/webgl/reduce_gpu.ts","name":null,"original":{"line":59,"column":24},"generated":{"line":31,"column":28}},{"source":"../src/kernels/webgl/reduce_gpu.ts","name":null,"original":{"line":60,"column":12},"generated":{"line":31,"column":46}},{"source":"../src/kernels/webgl/reduce_gpu.ts","name":null,"original":{"line":60,"column":27},"generated":{"line":31,"column":61}},{"source":"../src/kernels/webgl/reduce_gpu.ts","name":null,"original":{"line":59,"column":24},"generated":{"line":31,"column":66}},{"source":"../src/kernels/webgl/reduce_gpu.ts","name":null,"original":{"line":60,"column":32},"generated":{"line":31,"column":70}},{"source":"../src/kernels/webgl/reduce_gpu.ts","name":null,"original":{"line":59,"column":24},"generated":{"line":31,"column":155}},{"source":"../src/kernels/webgl/reduce_gpu.ts","name":null,"original":{"line":63,"column":24},"generated":{"line":31,"column":158}},{"source":"../src/kernels/webgl/reduce_gpu.ts","name":null,"original":{"line":59,"column":24},"generated":{"line":31,"column":167}},{"source":"../src/kernels/webgl/reduce_gpu.ts","name":null,"original":{"line":63,"column":33},"generated":{"line":31,"column":170}},{"source":"../src/kernels/webgl/reduce_gpu.ts","name":null,"original":{"line":59,"column":4},"generated":{"line":31,"column":209}},{"source":"../src/kernels/webgl/reduce_gpu.ts","name":null,"original":{"line":67,"column":4},"generated":{"line":32,"column":0}},{"source":"../src/kernels/webgl/reduce_gpu.ts","name":null,"original":{"line":67,"column":8},"generated":{"line":32,"column":12}},{"source":"../src/kernels/webgl/reduce_gpu.ts","name":null,"original":{"line":67,"column":18},"generated":{"line":32,"column":22}},{"source":"../src/kernels/webgl/reduce_gpu.ts","name":null,"original":{"line":67,"column":4},"generated":{"line":32,"column":28}},{"source":"../src/kernels/webgl/reduce_gpu.ts","name":null,"original":{"line":69,"column":4},"generated":{"line":33,"column":0}},{"source":"../src/kernels/webgl/reduce_gpu.ts","name":null,"original":{"line":69,"column":8},"generated":{"line":33,"column":12}},{"source":"../src/kernels/webgl/reduce_gpu.ts","name":null,"original":{"line":69,"column":23},"generated":{"line":33,"column":27}},{"source":"../src/kernels/webgl/reduce_gpu.ts","name":null,"original":{"line":69,"column":4},"generated":{"line":33,"column":32}},{"source":"../src/kernels/webgl/reduce_gpu.ts","name":null,"original":{"line":69,"column":30},"generated":{"line":33,"column":34}},{"source":"../src/kernels/webgl/reduce_gpu.ts","name":null,"original":{"line":70,"column":6},"generated":{"line":34,"column":0}},{"source":"../src/kernels/webgl/reduce_gpu.ts","name":null,"original":{"line":70,"column":28},"generated":{"line":34,"column":34}},{"source":"../src/kernels/webgl/reduce_gpu.ts","name":null,"original":{"line":70,"column":6},"generated":{"line":34,"column":39}},{"source":"../src/kernels/webgl/reduce_gpu.ts","name":null,"original":{"line":71,"column":6},"generated":{"line":35,"column":0}},{"source":"../src/kernels/webgl/reduce_gpu.ts","name":null,"original":{"line":71,"column":22},"generated":{"line":35,"column":28}},{"source":"../src/kernels/webgl/reduce_gpu.ts","name":null,"original":{"line":71,"column":6},"generated":{"line":35,"column":224}},{"source":"../src/kernels/webgl/reduce_gpu.ts","name":null,"original":{"line":76,"column":6},"generated":{"line":36,"column":0}},{"source":"../src/kernels/webgl/reduce_gpu.ts","name":null,"original":{"line":76,"column":16},"generated":{"line":36,"column":22}},{"source":"../src/kernels/webgl/reduce_gpu.ts","name":null,"original":{"line":76,"column":6},"generated":{"line":36,"column":29}},{"source":"../src/kernels/webgl/reduce_gpu.ts","name":null,"original":{"line":77,"column":5},"generated":{"line":37,"column":0}},{"source":"../src/kernels/webgl/reduce_gpu.ts","name":null,"original":{"line":69,"column":4},"generated":{"line":37,"column":9}},{"source":"../src/kernels/webgl/reduce_gpu.ts","name":null,"original":{"line":77,"column":11},"generated":{"line":37,"column":15}},{"source":"../src/kernels/webgl/reduce_gpu.ts","name":null,"original":{"line":77,"column":15},"generated":{"line":37,"column":19}},{"source":"../src/kernels/webgl/reduce_gpu.ts","name":null,"original":{"line":77,"column":30},"generated":{"line":37,"column":34}},{"source":"../src/kernels/webgl/reduce_gpu.ts","name":null,"original":{"line":77,"column":11},"generated":{"line":37,"column":39}},{"source":"../src/kernels/webgl/reduce_gpu.ts","name":null,"original":{"line":77,"column":37},"generated":{"line":37,"column":41}},{"source":"../src/kernels/webgl/reduce_gpu.ts","name":null,"original":{"line":78,"column":6},"generated":{"line":38,"column":0}},{"source":"../src/kernels/webgl/reduce_gpu.ts","name":null,"original":{"line":78,"column":28},"generated":{"line":38,"column":34}},{"source":"../src/kernels/webgl/reduce_gpu.ts","name":null,"original":{"line":78,"column":6},"generated":{"line":38,"column":39}},{"source":"../src/kernels/webgl/reduce_gpu.ts","name":null,"original":{"line":79,"column":6},"generated":{"line":39,"column":0}},{"source":"../src/kernels/webgl/reduce_gpu.ts","name":null,"original":{"line":79,"column":22},"generated":{"line":39,"column":28}},{"source":"../src/kernels/webgl/reduce_gpu.ts","name":null,"original":{"line":79,"column":6},"generated":{"line":39,"column":224}},{"source":"../src/kernels/webgl/reduce_gpu.ts","name":null,"original":{"line":84,"column":6},"generated":{"line":40,"column":0}},{"source":"../src/kernels/webgl/reduce_gpu.ts","name":null,"original":{"line":84,"column":16},"generated":{"line":40,"column":22}},{"source":"../src/kernels/webgl/reduce_gpu.ts","name":null,"original":{"line":84,"column":6},"generated":{"line":40,"column":29}},{"source":"../src/kernels/webgl/reduce_gpu.ts","name":null,"original":{"line":85,"column":5},"generated":{"line":41,"column":0}},{"source":"../src/kernels/webgl/reduce_gpu.ts","name":null,"original":{"line":87,"column":4},"generated":{"line":42,"column":0}},{"source":"../src/kernels/webgl/reduce_gpu.ts","name":null,"original":{"line":87,"column":8},"generated":{"line":42,"column":12}},{"source":"../src/kernels/webgl/reduce_gpu.ts","name":null,"original":{"line":87,"column":27},"generated":{"line":42,"column":31}},{"source":"../src/kernels/webgl/reduce_gpu.ts","name":null,"original":{"line":87,"column":4},"generated":{"line":42,"column":33}},{"source":"../src/kernels/webgl/reduce_gpu.ts","name":null,"original":{"line":88,"column":4},"generated":{"line":43,"column":0}},{"source":"../src/kernels/webgl/reduce_gpu.ts","name":null,"original":{"line":88,"column":8},"generated":{"line":43,"column":12}},{"source":"../src/kernels/webgl/reduce_gpu.ts","name":null,"original":{"line":88,"column":17},"generated":{"line":43,"column":21}},{"source":"../src/kernels/webgl/reduce_gpu.ts","name":null,"original":{"line":88,"column":8},"generated":{"line":43,"column":31}},{"source":"../src/kernels/webgl/reduce_gpu.ts","name":null,"original":{"line":88,"column":30},"generated":{"line":43,"column":34}},{"source":"../src/kernels/webgl/reduce_gpu.ts","name":null,"original":{"line":88,"column":4},"generated":{"line":43,"column":35}},{"source":"../src/kernels/webgl/reduce_gpu.ts","name":null,"original":{"line":88,"column":33},"generated":{"line":43,"column":37}},{"source":"../src/kernels/webgl/reduce_gpu.ts","name":null,"original":{"line":89,"column":6},"generated":{"line":44,"column":0}},{"source":"../src/kernels/webgl/reduce_gpu.ts","name":null,"original":{"line":89,"column":25},"generated":{"line":44,"column":31}},{"source":"../src/kernels/webgl/reduce_gpu.ts","name":null,"original":{"line":90,"column":36},"generated":{"line":44,"column":72}},{"source":"../src/kernels/webgl/reduce_gpu.ts","name":null,"original":{"line":89,"column":25},"generated":{"line":44,"column":78}},{"source":"../src/kernels/webgl/reduce_gpu.ts","name":null,"original":{"line":90,"column":42},"generated":{"line":44,"column":81}},{"source":"../src/kernels/webgl/reduce_gpu.ts","name":null,"original":{"line":89,"column":6},"generated":{"line":44,"column":144}},{"source":"../src/kernels/webgl/reduce_gpu.ts","name":null,"original":{"line":94,"column":5},"generated":{"line":45,"column":0}},{"source":"../src/kernels/webgl/reduce_gpu.ts","name":null,"original":{"line":95,"column":4},"generated":{"line":46,"column":0}},{"source":"../src/kernels/webgl/reduce_gpu.ts","name":null,"original":{"line":95,"column":9},"generated":{"line":46,"column":13}},{"source":"../src/kernels/webgl/reduce_gpu.ts","name":null,"original":{"line":95,"column":4},"generated":{"line":46,"column":21}},{"source":"../src/kernels/webgl/reduce_gpu.ts","name":null,"original":{"line":95,"column":20},"generated":{"line":46,"column":24}},{"source":"../src/kernels/webgl/reduce_gpu.ts","name":null,"original":{"line":96,"column":42},"generated":{"line":46,"column":71}},{"source":"../src/kernels/webgl/reduce_gpu.ts","name":null,"original":{"line":95,"column":20},"generated":{"line":46,"column":90}},{"source":"../src/kernels/webgl/reduce_gpu.ts","name":null,"original":{"line":96,"column":61},"generated":{"line":46,"column":93}},{"source":"../src/kernels/webgl/reduce_gpu.ts","name":null,"original":{"line":95,"column":20},"generated":{"line":46,"column":205}},{"source":"../src/kernels/webgl/reduce_gpu.ts","name":null,"original":{"line":100,"column":10},"generated":{"line":46,"column":208}},{"source":"../src/kernels/webgl/reduce_gpu.ts","name":null,"original":{"line":95,"column":20},"generated":{"line":46,"column":224}},{"source":"../src/kernels/webgl/reduce_gpu.ts","name":null,"original":{"line":100,"column":26},"generated":{"line":46,"column":227}},{"source":"../src/kernels/webgl/reduce_gpu.ts","name":null,"original":{"line":95,"column":20},"generated":{"line":46,"column":439}},{"source":"../src/kernels/webgl/reduce_gpu.ts","name":null,"original":{"line":108,"column":34},"generated":{"line":46,"column":442}},{"source":"../src/kernels/webgl/reduce_gpu.ts","name":null,"original":{"line":95,"column":20},"generated":{"line":46,"column":452}},{"source":"../src/kernels/webgl/reduce_gpu.ts","name":null,"original":{"line":108,"column":44},"generated":{"line":46,"column":455}},{"source":"../src/kernels/webgl/reduce_gpu.ts","name":null,"original":{"line":95,"column":20},"generated":{"line":46,"column":494}},{"source":"../src/kernels/webgl/reduce_gpu.ts","name":null,"original":{"line":110,"column":34},"generated":{"line":46,"column":497}},{"source":"../src/kernels/webgl/reduce_gpu.ts","name":null,"original":{"line":95,"column":20},"generated":{"line":46,"column":516}},{"source":"../src/kernels/webgl/reduce_gpu.ts","name":null,"original":{"line":110,"column":53},"generated":{"line":46,"column":519}},{"source":"../src/kernels/webgl/reduce_gpu.ts","name":null,"original":{"line":95,"column":20},"generated":{"line":46,"column":648}},{"source":"../src/kernels/webgl/reduce_gpu.ts","name":null,"original":{"line":115,"column":30},"generated":{"line":46,"column":651}},{"source":"../src/kernels/webgl/reduce_gpu.ts","name":null,"original":{"line":95,"column":20},"generated":{"line":46,"column":672}},{"source":"../src/kernels/webgl/reduce_gpu.ts","name":null,"original":{"line":115,"column":51},"generated":{"line":46,"column":675}},{"source":"../src/kernels/webgl/reduce_gpu.ts","name":null,"original":{"line":95,"column":20},"generated":{"line":46,"column":737}},{"source":"../src/kernels/webgl/reduce_gpu.ts","name":null,"original":{"line":117,"column":12},"generated":{"line":46,"column":740}},{"source":"../src/kernels/webgl/reduce_gpu.ts","name":null,"original":{"line":95,"column":20},"generated":{"line":46,"column":747}},{"source":"../src/kernels/webgl/reduce_gpu.ts","name":null,"original":{"line":117,"column":19},"generated":{"line":46,"column":750}},{"source":"../src/kernels/webgl/reduce_gpu.ts","name":null,"original":{"line":95,"column":20},"generated":{"line":46,"column":762}},{"source":"../src/kernels/webgl/reduce_gpu.ts","name":null,"original":{"line":117,"column":32},"generated":{"line":46,"column":765}},{"source":"../src/kernels/webgl/reduce_gpu.ts","name":null,"original":{"line":95,"column":20},"generated":{"line":46,"column":772}},{"source":"../src/kernels/webgl/reduce_gpu.ts","name":null,"original":{"line":117,"column":39},"generated":{"line":46,"column":775}},{"source":"../src/kernels/webgl/reduce_gpu.ts","name":null,"original":{"line":95,"column":20},"generated":{"line":46,"column":965}},{"source":"../src/kernels/webgl/reduce_gpu.ts","name":null,"original":{"line":124,"column":12},"generated":{"line":46,"column":968}},{"source":"../src/kernels/webgl/reduce_gpu.ts","name":null,"original":{"line":95,"column":20},"generated":{"line":46,"column":981}},{"source":"../src/kernels/webgl/reduce_gpu.ts","name":null,"original":{"line":124,"column":25},"generated":{"line":46,"column":984}},{"source":"../src/kernels/webgl/reduce_gpu.ts","name":null,"original":{"line":95,"column":20},"generated":{"line":46,"column":1032}},{"source":"../src/kernels/webgl/reduce_gpu.ts","name":null,"original":{"line":127,"column":33},"generated":{"line":46,"column":1035}},{"source":"../src/kernels/webgl/reduce_gpu.ts","name":null,"original":{"line":95,"column":20},"generated":{"line":46,"column":1056}},{"source":"../src/kernels/webgl/reduce_gpu.ts","name":null,"original":{"line":127,"column":54},"generated":{"line":46,"column":1059}},{"source":"../src/kernels/webgl/reduce_gpu.ts","name":null,"original":{"line":95,"column":20},"generated":{"line":46,"column":1076}},{"source":"../src/kernels/webgl/reduce_gpu.ts","name":null,"original":{"line":128,"column":14},"generated":{"line":46,"column":1080}},{"source":"../src/kernels/webgl/reduce_gpu.ts","name":null,"original":{"line":128,"column":42},"generated":{"line":46,"column":1108}},{"source":"../src/kernels/webgl/reduce_gpu.ts","name":null,"original":{"line":95,"column":20},"generated":{"line":46,"column":1109}},{"source":"../src/kernels/webgl/reduce_gpu.ts","name":null,"original":{"line":128,"column":43},"generated":{"line":46,"column":1113}},{"source":"../src/kernels/webgl/reduce_gpu.ts","name":null,"original":{"line":95,"column":20},"generated":{"line":46,"column":1130}},{"source":"../src/kernels/webgl/reduce_gpu.ts","name":null,"original":{"line":129,"column":12},"generated":{"line":46,"column":1133}},{"source":"../src/kernels/webgl/reduce_gpu.ts","name":null,"original":{"line":95,"column":20},"generated":{"line":46,"column":1140}},{"source":"../src/kernels/webgl/reduce_gpu.ts","name":null,"original":{"line":129,"column":19},"generated":{"line":46,"column":1143}},{"source":"../src/kernels/webgl/reduce_gpu.ts","name":null,"original":{"line":95,"column":20},"generated":{"line":46,"column":1155}},{"source":"../src/kernels/webgl/reduce_gpu.ts","name":null,"original":{"line":129,"column":32},"generated":{"line":46,"column":1158}},{"source":"../src/kernels/webgl/reduce_gpu.ts","name":null,"original":{"line":95,"column":20},"generated":{"line":46,"column":1165}},{"source":"../src/kernels/webgl/reduce_gpu.ts","name":null,"original":{"line":129,"column":39},"generated":{"line":46,"column":1168}},{"source":"../src/kernels/webgl/reduce_gpu.ts","name":null,"original":{"line":95,"column":20},"generated":{"line":46,"column":1337}},{"source":"../src/kernels/webgl/reduce_gpu.ts","name":null,"original":{"line":136,"column":12},"generated":{"line":46,"column":1340}},{"source":"../src/kernels/webgl/reduce_gpu.ts","name":null,"original":{"line":95,"column":20},"generated":{"line":46,"column":1353}},{"source":"../src/kernels/webgl/reduce_gpu.ts","name":null,"original":{"line":136,"column":25},"generated":{"line":46,"column":1356}},{"source":"../src/kernels/webgl/reduce_gpu.ts","name":null,"original":{"line":95,"column":20},"generated":{"line":46,"column":1379}},{"source":"../src/kernels/webgl/reduce_gpu.ts","name":null,"original":{"line":137,"column":21},"generated":{"line":46,"column":1383}},{"source":"../src/kernels/webgl/reduce_gpu.ts","name":null,"original":{"line":137,"column":49},"generated":{"line":46,"column":1411}},{"source":"../src/kernels/webgl/reduce_gpu.ts","name":null,"original":{"line":95,"column":20},"generated":{"line":46,"column":1412}},{"source":"../src/kernels/webgl/reduce_gpu.ts","name":null,"original":{"line":137,"column":50},"generated":{"line":46,"column":1416}},{"source":"../src/kernels/webgl/reduce_gpu.ts","name":null,"original":{"line":95,"column":20},"generated":{"line":46,"column":1433}},{"source":"../src/kernels/webgl/reduce_gpu.ts","name":null,"original":{"line":138,"column":12},"generated":{"line":46,"column":1436}},{"source":"../src/kernels/webgl/reduce_gpu.ts","name":null,"original":{"line":95,"column":20},"generated":{"line":46,"column":1443}},{"source":"../src/kernels/webgl/reduce_gpu.ts","name":null,"original":{"line":138,"column":19},"generated":{"line":46,"column":1446}},{"source":"../src/kernels/webgl/reduce_gpu.ts","name":null,"original":{"line":95,"column":20},"generated":{"line":46,"column":1458}},{"source":"../src/kernels/webgl/reduce_gpu.ts","name":null,"original":{"line":138,"column":32},"generated":{"line":46,"column":1461}},{"source":"../src/kernels/webgl/reduce_gpu.ts","name":null,"original":{"line":95,"column":20},"generated":{"line":46,"column":1468}},{"source":"../src/kernels/webgl/reduce_gpu.ts","name":null,"original":{"line":138,"column":39},"generated":{"line":46,"column":1471}},{"source":"../src/kernels/webgl/reduce_gpu.ts","name":null,"original":{"line":95,"column":20},"generated":{"line":46,"column":1647}},{"source":"../src/kernels/webgl/reduce_gpu.ts","name":null,"original":{"line":145,"column":12},"generated":{"line":46,"column":1650}},{"source":"../src/kernels/webgl/reduce_gpu.ts","name":null,"original":{"line":95,"column":20},"generated":{"line":46,"column":1663}},{"source":"../src/kernels/webgl/reduce_gpu.ts","name":null,"original":{"line":145,"column":25},"generated":{"line":46,"column":1666}},{"source":"../src/kernels/webgl/reduce_gpu.ts","name":null,"original":{"line":95,"column":20},"generated":{"line":46,"column":1689}},{"source":"../src/kernels/webgl/reduce_gpu.ts","name":null,"original":{"line":146,"column":21},"generated":{"line":46,"column":1693}},{"source":"../src/kernels/webgl/reduce_gpu.ts","name":null,"original":{"line":146,"column":49},"generated":{"line":46,"column":1721}},{"source":"../src/kernels/webgl/reduce_gpu.ts","name":null,"original":{"line":95,"column":20},"generated":{"line":46,"column":1722}},{"source":"../src/kernels/webgl/reduce_gpu.ts","name":null,"original":{"line":146,"column":50},"generated":{"line":46,"column":1726}},{"source":"../src/kernels/webgl/reduce_gpu.ts","name":null,"original":{"line":95,"column":20},"generated":{"line":46,"column":1743}},{"source":"../src/kernels/webgl/reduce_gpu.ts","name":null,"original":{"line":147,"column":12},"generated":{"line":46,"column":1746}},{"source":"../src/kernels/webgl/reduce_gpu.ts","name":null,"original":{"line":95,"column":20},"generated":{"line":46,"column":1753}},{"source":"../src/kernels/webgl/reduce_gpu.ts","name":null,"original":{"line":147,"column":19},"generated":{"line":46,"column":1756}},{"source":"../src/kernels/webgl/reduce_gpu.ts","name":null,"original":{"line":95,"column":20},"generated":{"line":46,"column":1768}},{"source":"../src/kernels/webgl/reduce_gpu.ts","name":null,"original":{"line":147,"column":32},"generated":{"line":46,"column":1771}},{"source":"../src/kernels/webgl/reduce_gpu.ts","name":null,"original":{"line":95,"column":20},"generated":{"line":46,"column":1778}},{"source":"../src/kernels/webgl/reduce_gpu.ts","name":null,"original":{"line":147,"column":39},"generated":{"line":46,"column":1781}},{"source":"../src/kernels/webgl/reduce_gpu.ts","name":null,"original":{"line":95,"column":20},"generated":{"line":46,"column":1964}},{"source":"../src/kernels/webgl/reduce_gpu.ts","name":null,"original":{"line":154,"column":12},"generated":{"line":46,"column":1967}},{"source":"../src/kernels/webgl/reduce_gpu.ts","name":null,"original":{"line":95,"column":20},"generated":{"line":46,"column":1980}},{"source":"../src/kernels/webgl/reduce_gpu.ts","name":null,"original":{"line":154,"column":25},"generated":{"line":46,"column":1983}},{"source":"../src/kernels/webgl/reduce_gpu.ts","name":null,"original":{"line":95,"column":20},"generated":{"line":46,"column":2016}},{"source":"../src/kernels/webgl/reduce_gpu.ts","name":null,"original":{"line":156,"column":20},"generated":{"line":46,"column":2019}},{"source":"../src/kernels/webgl/reduce_gpu.ts","name":null,"original":{"line":95,"column":20},"generated":{"line":46,"column":2030}},{"source":"../src/kernels/webgl/reduce_gpu.ts","name":null,"original":{"line":156,"column":31},"generated":{"line":46,"column":2033}},{"source":"../src/kernels/webgl/reduce_gpu.ts","name":null,"original":{"line":95,"column":4},"generated":{"line":46,"column":2052}},{"source":"../src/kernels/webgl/reduce_gpu.ts","name":null,"original":{"line":159,"column":3},"generated":{"line":47,"column":0}},{"source":"../src/kernels/webgl/reduce_gpu.ts","name":null,"original":{"line":160,"column":0},"generated":{"line":48,"column":0}},{"source":"../src/kernels/webgl/reduce_gpu.ts","name":null,"original":{"line":160,"column":0},"generated":{"line":48,"column":11}},{"source":"../src/kernels/webgl/reduce_gpu.ts","name":null,"original":{"line":160,"column":0},"generated":{"line":48,"column":24}},{"source":"../src/kernels/webgl/reduce_gpu.ts","name":null,"original":{"line":21,"column":0},"generated":{"line":49,"column":0}},{"source":"../src/kernels/webgl/reduce_gpu.ts","name":null,"original":{"line":21,"column":0},"generated":{"line":49,"column":1}},{"source":"../src/kernels/webgl/reduce_gpu.ts","name":null,"original":{"line":21,"column":0},"generated":{"line":49,"column":3}},{"source":"../src/kernels/webgl/reduce_gpu.ts","name":null,"original":{"line":21,"column":13},"generated":{"line":50,"column":0}},{"source":"../src/kernels/webgl/reduce_gpu.ts","name":null,"original":{"line":21,"column":13},"generated":{"line":50,"column":8}},{"source":"../src/kernels/webgl/reduce_gpu.ts","name":null,"original":{"line":21,"column":13},"generated":{"line":50,"column":21}},{"source":"../src/kernels/webgl/reduce_gpu.ts","name":null,"original":{"line":21,"column":13},"generated":{"line":50,"column":24}},{"source":"../src/kernels/webgl/reduce_gpu.ts","name":null,"original":{"line":21,"column":13},"generated":{"line":50,"column":37}}],"sources":{"../src/kernels/webgl/reduce_gpu.ts":"/**\n * @license\n * Copyright 2017 Google Inc. All Rights Reserved.\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n * =============================================================================\n */\n\nimport {ReduceInfo} from '../../ops/reduce_util';\nimport {GPGPUProgram} from './gpgpu_math';\n\nexport class ReduceProgram implements GPGPUProgram {\n  variableNames = ['x'];\n  outputShape: number[];\n  userCode: string;\n\n  constructor(\n      reduceInfo: ReduceInfo, reduceType: 'all'|'any'|'max'|'min'|'sum') {\n    const windowSize = reduceInfo.windowSize;\n    const batchSize = reduceInfo.batchSize;\n    const inSize = reduceInfo.inSize;\n    const outSize = Math.ceil(inSize / windowSize);\n    this.outputShape = [batchSize, outSize];\n\n    let initializationValue = '0.0';\n    let compareOp = ``;\n\n    if (reduceType === 'min') {\n      initializationValue = '1.0 / 0.0';\n      compareOp = `min`;\n    } else if (reduceType === 'max') {\n      initializationValue = '-1.0 / 0.0';\n      compareOp = `max`;\n    }\n\n    let returnValue = `${reduceType}(${reduceType}(${reduceType}(` +\n        'minMaxValue[0], minMaxValue[1]), minMaxValue[2]), minMaxValue[3])';\n\n    if (reduceType === 'sum') {\n      returnValue = `sumValue`;\n    } else if (reduceType === 'all') {\n      returnValue = `allValue`;\n    } else if (reduceType === 'any') {\n      returnValue = `anyValue`;\n    }\n\n    const windowSizeNearestVec4 = Math.floor(windowSize / 4) * 4;\n    const windowSizeVec4Remainder = windowSize % 4;\n\n    let updateSnippet = `\n      if (${reduceType === 'sum'}) {\n        sumValue += dot(values, ones);\n      } else {\n        minMaxValue = ${compareOp}(values, minMaxValue);\n      }\n    `;\n\n    let vecType = `vec4`;\n\n    if (reduceType === 'all') {\n      initializationValue = '1.0';\n      updateSnippet = `\n        bool reducedAllValue = all(values);\n        float floatedReducedAllValue = float(reducedAllValue);\n        allValue = float(allValue >= 1.0 && floatedReducedAllValue >= 1.0);\n      `;\n      vecType = `bvec4`;\n    } else if (reduceType === 'any') {\n      initializationValue = '0.0';\n      updateSnippet = `\n        bool reducedAnyValue = any(values);\n        float floatedReducedAnyValue = float(reducedAnyValue);\n        anyValue = float(anyValue >= 1.0 || floatedReducedAnyValue >= 1.0);\n      `;\n      vecType = `bvec4`;\n    }\n\n    let checkOutOfBounds = '';\n    if (inSize % windowSize > 0) {\n      checkOutOfBounds = `\n        if (inIdx < 0 || inIdx >= ${inSize}) {\n          return initializationValue;\n        }\n      `;\n    }\n    this.userCode = `\n      const float initializationValue = ${initializationValue};\n      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);\n\n      float getValue(int batch, int inIdx) {\n        ${checkOutOfBounds}\n        return getX(batch, inIdx);\n      }\n\n      void main() {\n        ivec2 coords = getOutputCoords();\n        int batch = coords[0];\n        int outIdx = coords[1];\n        int inOffset = outIdx * ${windowSize};\n\n        vec4 minMaxValue = vec4(${initializationValue});\n        float sumValue = 0.0;\n        float allValue = 1.0;\n        float anyValue = 0.0;\n\n        for (int i = 0; i < ${windowSizeNearestVec4}; i += 4) {\n          int inIdx = inOffset + i;\n          ${vecType} values = ${vecType}(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            getValue(batch, inIdx + 2),\n            getValue(batch, inIdx + 3)\n          );\n\n          ${updateSnippet}\n        }\n\n        int inIdx = inOffset + ${windowSizeNearestVec4};\n        if (${windowSizeVec4Remainder === 1}) {\n          ${vecType} values = ${vecType}(\n            getValue(batch, inIdx),\n            initializationValue,\n            initializationValue,\n            initializationValue\n          );\n\n          ${updateSnippet}\n        } else if (${windowSizeVec4Remainder === 2}) {\n          ${vecType} values = ${vecType}(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            initializationValue,\n            initializationValue\n          );\n\n          ${updateSnippet}\n        } else if (${windowSizeVec4Remainder === 3}) {\n          ${vecType} values = ${vecType}(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            getValue(batch, inIdx + 2),\n            initializationValue\n          );\n\n          ${updateSnippet}\n        }\n        setOutput(${returnValue});\n      }\n    `;\n  }\n}\n"},"lineCount":null}},"hash":"75bb6c8343fb1640bded22ab2f36eeef","cacheData":{"env":{}}}